@using Climb.Controllers
@using Climb.ViewModels
@using Climb.ViewModels.Sets
@model GenericViewModel<Set>

@{
    ViewBag.Title = "Fight";
    Layout = "_Layout";
}

@Html.Partial("/Views/Sets/Partials/Fight.cshtml", SetFightViewModel.Create(Model.data, SetsController.MaxMatchCount))

@section Scripts
{
    <script type="text/javascript">
        $(document).ready(() => {
            scoreUpdated();

            $("#submit-button").click(function () {
                $.post({
                    url: "/Sets/Submit",
                    data: $("#set-form").serialize(),
                    success: function() {
                        alert("Set submitted!");
                    },
                    error: function(response) {
                        alert(response.responseText);
                    }
                });
                return false;
            });
        });
    </script>
}